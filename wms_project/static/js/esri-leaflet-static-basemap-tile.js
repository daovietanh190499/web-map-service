/* esri-leaflet-static-basemap-tile - v1.1.1 - Tue Apr 08 2025 07:36:38 GMT-0700 (Pacific Daylight Time)
 * Copyright (c) 2025 Environmental Systems Research Institute, Inc.
 * Apache-2.0 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("leaflet"),require("esri-leaflet")):"function"==typeof define&&define.amd?define(["exports","leaflet","esri-leaflet"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).L=e.L||{},e.L.esri=e.L.esri||{},e.L.esri.Static={}),e.L,e.L.esri)}(this,(function(e,t,i){"use strict";var s="1.1.1";const o="https://static-map-tiles-api.arcgis.com/arcgis/rest/services/static-basemap-tiles-service/v1/";const n={getSelf:async function(e){if(!e)throw new Error("An access token is required to access the static basemap tiles service.");const t=o+"self";return new Promise(((s,o)=>{i.request(t,{token:e},((e,t)=>{e&&o(e),s(t)}))}))}},r=t.TileLayer.extend({initialize:function(e,i){if(i&&t.setOptions(this,i),this.options.apiKey&&(this.options.apikey=this.options.apiKey),this.options.apikey?this.options.token=this.options.apikey:this.options.token&&(this.options.apikey=this.options.token),!this.options.token)throw new Error("An ArcGIS access token is required for static basemap tiles. To learn more, go to https://developers.arcgis.com/documentation/security-and-authentication/");if(!e||"string"!=typeof e||0===e.length)throw new Error("A valid style enum is required for staticBasemapTileLayer (e.g. 'arcgis/streets').");i.pane?this.options.pane=i.pane:e.includes("/labels")&&(this.options.pane="esri-labels"),this.options.zoomOffset=-1,this.options.tileSize=512,"/"===e[0]&&(e=e.substring(1,e.length)),this.options.style=e,this.serviceUrl=function(e,t,i){if(!t)throw new Error("An access token is required to access the static basemap tiles service.");let s=(i.baseUrl||o)+e+"/static/tile/{z}/{y}/{x}?token="+t;return i.worldview&&"unitedStatesOfAmerica"===i.worldview&&i.language&&console.warn("esri-leaflet-static-basemap-tile: The 'language' parameter is not supported with the 'worldview' parameter. The 'language' parameter will be ignored."),i.worldview&&"unitedStatesOfAmerica"!==i.worldview&&console.warn("esri-leaflet-static-basemap-tile: Invalid worldview parameter. Supported values are 'unitedStatesOfAmerica' or undefined. The 'worldview' parameter will be ignored."),i.language&&(s+="&language="+i.language),i.worldview&&(s+="&worldview="+i.worldview),s}(e,this.options.token,this.options),t.TileLayer.prototype.initialize.call(this,this.serviceUrl,this.options)},onAdd:function(e){this._setupAttribution(),this._initPane(),t.TileLayer.prototype.onAdd.call(this,e)},onRemove:function(e){this._removeAttribution(),t.TileLayer.prototype.onRemove.call(this,e)},_setupAttribution:function(){this._map&&async function(e){const{style:t,token:s}=e,n=(e.baseUrl||o)+t+"/static";return new Promise(((e,t)=>{i.request(n,{token:s},((i,s)=>{i&&t(i),e(s.copyrightText)}))}))}(this.options).then((e=>{this.currentAttribution=`Powered by <a href="https://www.esri.com">Esri</a> | ${e}`,this._map.attributionControl.addAttribution(this.currentAttribution)}))},_removeAttribution:function(){this.currentAttribution&&(this._map.attributionControl.removeAttribution(this.currentAttribution),this.currentAttribution=void 0)},_initPane:function(){if(this._map.getPane(this.options.pane))return;const e=this._map.createPane(this.options.pane);e.style.pointerEvents="none";let t=200;"esri-labels"===this.options.pane&&(t=300),e.style.zIndex=t}});const a=s;e.StaticBasemapTileLayer=r,e.Util=n,e.VERSION=a,e.staticBasemapTileLayer=function(e,t){return new r(e,t)},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=esri-leaflet-static-basemap-tile.js.map